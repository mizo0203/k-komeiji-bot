package com.mizo0203.komeiji.repo.github.data;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.junit.Test;

import java.io.IOException;

import static org.junit.Assert.assertNotNull;

public class CommitCommentEventTest {
  @Test
  public void parseCommitCommentEvent() throws IOException {
    String body =
        "{\n"
            + "  \"action\": \"created\",\n"
            + "  \"comment\": {\n"
            + "    \"url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/comments/27775605\",\n"
            + "    \"html_url\": \"https://github.com/mizo0203/komeiji-bot/commit/7437ea40aa36c0b471229fa9382e5b2ecf8fdbb2#commitcomment-27775605\",\n"
            + "    \"id\": 27775605,\n"
            + "    \"user\": {\n"
            + "      \"login\": \"mizo0203\",\n"
            + "      \"id\": 3683707,\n"
            + "      \"avatar_url\": \"https://avatars0.githubusercontent.com/u/3683707?v=4\",\n"
            + "      \"gravatar_id\": \"\",\n"
            + "      \"url\": \"https://api.github.com/users/mizo0203\",\n"
            + "      \"html_url\": \"https://github.com/mizo0203\",\n"
            + "      \"followers_url\": \"https://api.github.com/users/mizo0203/followers\",\n"
            + "      \"following_url\": \"https://api.github.com/users/mizo0203/following{/other_user}\",\n"
            + "      \"gists_url\": \"https://api.github.com/users/mizo0203/gists{/gist_id}\",\n"
            + "      \"starred_url\": \"https://api.github.com/users/mizo0203/starred{/owner}{/repo}\",\n"
            + "      \"subscriptions_url\": \"https://api.github.com/users/mizo0203/subscriptions\",\n"
            + "      \"organizations_url\": \"https://api.github.com/users/mizo0203/orgs\",\n"
            + "      \"repos_url\": \"https://api.github.com/users/mizo0203/repos\",\n"
            + "      \"events_url\": \"https://api.github.com/users/mizo0203/events{/privacy}\",\n"
            + "      \"received_events_url\": \"https://api.github.com/users/mizo0203/received_events\",\n"
            + "      \"type\": \"User\",\n"
            + "      \"site_admin\": false\n"
            + "    },\n"
            + "    \"position\": null,\n"
            + "    \"line\": null,\n"
            + "    \"path\": null,\n"
            + "    \"commit_id\": \"7437ea40aa36c0b471229fa9382e5b2ecf8fdbb2\",\n"
            + "    \"created_at\": \"2018-02-25T14:49:45Z\",\n"
            + "    \"updated_at\": \"2018-02-25T14:49:45Z\",\n"
            + "    \"author_association\": \"OWNER\",\n"
            + "    \"body\": \"GitHub への commit comment をツイートする機能を追加\"\n"
            + "  },\n"
            + "  \"repository\": {\n"
            + "    \"id\": 122714802,\n"
            + "    \"name\": \"komeiji-bot\",\n"
            + "    \"full_name\": \"mizo0203/komeiji-bot\",\n"
            + "    \"owner\": {\n"
            + "      \"login\": \"mizo0203\",\n"
            + "      \"id\": 3683707,\n"
            + "      \"avatar_url\": \"https://avatars0.githubusercontent.com/u/3683707?v=4\",\n"
            + "      \"gravatar_id\": \"\",\n"
            + "      \"url\": \"https://api.github.com/users/mizo0203\",\n"
            + "      \"html_url\": \"https://github.com/mizo0203\",\n"
            + "      \"followers_url\": \"https://api.github.com/users/mizo0203/followers\",\n"
            + "      \"following_url\": \"https://api.github.com/users/mizo0203/following{/other_user}\",\n"
            + "      \"gists_url\": \"https://api.github.com/users/mizo0203/gists{/gist_id}\",\n"
            + "      \"starred_url\": \"https://api.github.com/users/mizo0203/starred{/owner}{/repo}\",\n"
            + "      \"subscriptions_url\": \"https://api.github.com/users/mizo0203/subscriptions\",\n"
            + "      \"organizations_url\": \"https://api.github.com/users/mizo0203/orgs\",\n"
            + "      \"repos_url\": \"https://api.github.com/users/mizo0203/repos\",\n"
            + "      \"events_url\": \"https://api.github.com/users/mizo0203/events{/privacy}\",\n"
            + "      \"received_events_url\": \"https://api.github.com/users/mizo0203/received_events\",\n"
            + "      \"type\": \"User\",\n"
            + "      \"site_admin\": false\n"
            + "    },\n"
            + "    \"private\": false,\n"
            + "    \"html_url\": \"https://github.com/mizo0203/komeiji-bot\",\n"
            + "    \"description\": null,\n"
            + "    \"fork\": false,\n"
            + "    \"url\": \"https://api.github.com/repos/mizo0203/komeiji-bot\",\n"
            + "    \"forks_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/forks\",\n"
            + "    \"keys_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/keys{/key_id}\",\n"
            + "    \"collaborators_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/collaborators{/collaborator}\",\n"
            + "    \"teams_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/teams\",\n"
            + "    \"hooks_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/hooks\",\n"
            + "    \"issue_events_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/issues/events{/number}\",\n"
            + "    \"events_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/events\",\n"
            + "    \"assignees_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/assignees{/user}\",\n"
            + "    \"branches_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/branches{/branch}\",\n"
            + "    \"tags_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/tags\",\n"
            + "    \"blobs_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/git/blobs{/sha}\",\n"
            + "    \"git_tags_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/git/tags{/sha}\",\n"
            + "    \"git_refs_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/git/refs{/sha}\",\n"
            + "    \"trees_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/git/trees{/sha}\",\n"
            + "    \"statuses_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/statuses/{sha}\",\n"
            + "    \"languages_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/languages\",\n"
            + "    \"stargazers_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/stargazers\",\n"
            + "    \"contributors_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/contributors\",\n"
            + "    \"subscribers_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/subscribers\",\n"
            + "    \"subscription_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/subscription\",\n"
            + "    \"commits_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/commits{/sha}\",\n"
            + "    \"git_commits_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/git/commits{/sha}\",\n"
            + "    \"comments_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/comments{/number}\",\n"
            + "    \"issue_comment_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/issues/comments{/number}\",\n"
            + "    \"contents_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/contents/{+path}\",\n"
            + "    \"compare_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/compare/{base}...{head}\",\n"
            + "    \"merges_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/merges\",\n"
            + "    \"archive_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/{archive_format}{/ref}\",\n"
            + "    \"downloads_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/downloads\",\n"
            + "    \"issues_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/issues{/number}\",\n"
            + "    \"pulls_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/pulls{/number}\",\n"
            + "    \"milestones_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/milestones{/number}\",\n"
            + "    \"notifications_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/notifications{?since,all,participating}\",\n"
            + "    \"labels_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/labels{/name}\",\n"
            + "    \"releases_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/releases{/id}\",\n"
            + "    \"deployments_url\": \"https://api.github.com/repos/mizo0203/komeiji-bot/deployments\",\n"
            + "    \"created_at\": \"2018-02-24T07:19:57Z\",\n"
            + "    \"updated_at\": \"2018-02-24T07:38:47Z\",\n"
            + "    \"pushed_at\": \"2018-02-25T14:49:02Z\",\n"
            + "    \"git_url\": \"git://github.com/mizo0203/komeiji-bot.git\",\n"
            + "    \"ssh_url\": \"git@github.com:mizo0203/komeiji-bot.git\",\n"
            + "    \"clone_url\": \"https://github.com/mizo0203/komeiji-bot.git\",\n"
            + "    \"svn_url\": \"https://github.com/mizo0203/komeiji-bot\",\n"
            + "    \"homepage\": \"http://redmine.mizo0203.com/projects/komeiji-bot\",\n"
            + "    \"size\": 62,\n"
            + "    \"stargazers_count\": 0,\n"
            + "    \"watchers_count\": 0,\n"
            + "    \"language\": \"Java\",\n"
            + "    \"has_issues\": false,\n"
            + "    \"has_projects\": false,\n"
            + "    \"has_downloads\": true,\n"
            + "    \"has_wiki\": true,\n"
            + "    \"has_pages\": false,\n"
            + "    \"forks_count\": 0,\n"
            + "    \"mirror_url\": null,\n"
            + "    \"archived\": false,\n"
            + "    \"open_issues_count\": 0,\n"
            + "    \"license\": {\n"
            + "      \"key\": \"apache-2.0\",\n"
            + "      \"name\": \"Apache License 2.0\",\n"
            + "      \"spdx_id\": \"Apache-2.0\",\n"
            + "      \"url\": \"https://api.github.com/licenses/apache-2.0\"\n"
            + "    },\n"
            + "    \"forks\": 0,\n"
            + "    \"open_issues\": 0,\n"
            + "    \"watchers\": 0,\n"
            + "    \"default_branch\": \"master\"\n"
            + "  },\n"
            + "  \"sender\": {\n"
            + "    \"login\": \"mizo0203\",\n"
            + "    \"id\": 3683707,\n"
            + "    \"avatar_url\": \"https://avatars0.githubusercontent.com/u/3683707?v=4\",\n"
            + "    \"gravatar_id\": \"\",\n"
            + "    \"url\": \"https://api.github.com/users/mizo0203\",\n"
            + "    \"html_url\": \"https://github.com/mizo0203\",\n"
            + "    \"followers_url\": \"https://api.github.com/users/mizo0203/followers\",\n"
            + "    \"following_url\": \"https://api.github.com/users/mizo0203/following{/other_user}\",\n"
            + "    \"gists_url\": \"https://api.github.com/users/mizo0203/gists{/gist_id}\",\n"
            + "    \"starred_url\": \"https://api.github.com/users/mizo0203/starred{/owner}{/repo}\",\n"
            + "    \"subscriptions_url\": \"https://api.github.com/users/mizo0203/subscriptions\",\n"
            + "    \"organizations_url\": \"https://api.github.com/users/mizo0203/orgs\",\n"
            + "    \"repos_url\": \"https://api.github.com/users/mizo0203/repos\",\n"
            + "    \"events_url\": \"https://api.github.com/users/mizo0203/events{/privacy}\",\n"
            + "    \"received_events_url\": \"https://api.github.com/users/mizo0203/received_events\",\n"
            + "    \"type\": \"User\",\n"
            + "    \"site_admin\": false\n"
            + "  }\n"
            + "}";
    CommitCommentEvent commitCommentEvent =
        new ObjectMapper().readValue(body, CommitCommentEvent.class);
    assertNotNull(commitCommentEvent);
  }
}
